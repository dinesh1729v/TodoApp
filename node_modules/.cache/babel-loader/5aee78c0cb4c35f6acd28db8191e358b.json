{"ast":null,"code":"var _jsxFileName = \"/Users/dineshvujuru/Desktop/DineshFiles/Masters/Spring2023/Webapps/Milestone2/Netlify/TodoApp/src/components/Homepage.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { signOut, onAuthStateChanged } from \"firebase/auth\";\nimport { auth, db } from \"../firebase.js\";\nimport { useNavigate } from \"react-router-dom\";\nimport { uid } from \"uid\";\nimport { set, ref, onValue, remove, update } from \"firebase/database\";\nimport { child, get } from \"firebase/database\";\nimport Header from \"./Header.js\";\nimport Footer from \"./Footer.js\";\nimport \"./homepage.css\";\nimport AddIcon from \"@mui/icons-material/Add\";\nimport EditIcon from \"@mui/icons-material/Edit\";\nimport DeleteIcon from \"@mui/icons-material/Delete\";\nimport LogoutIcon from '@mui/icons-material/Logout';\nimport CheckIcon from '@mui/icons-material/Check';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Homepage() {\n  _s();\n\n  const [category, setCategory] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [todo, setTodo] = useState(\"\");\n  const [date, setDate] = useState(\"\");\n  const [todos, setTodos] = useState([]);\n  const [isEdit, setIsEdit] = useState(false);\n  const [tempUidd, setTempUidd] = useState(\"\");\n  const navigate = useNavigate();\n  useEffect(() => {\n    auth.onAuthStateChanged(user => {\n      if (user) {\n        // read\n        onValue(ref(db, `/${auth.currentUser.uid}`), snapshot => {\n          setTodos([]);\n          const data = snapshot.val();\n\n          if (data !== null) {\n            Object.values(data).map(todo => {\n              setTodos(oldArray => [...oldArray, todo]);\n            });\n          }\n        });\n      } else if (!user) {\n        navigate(\"/\");\n      }\n    });\n  }, []);\n\n  const handleSignOut = () => {\n    signOut(auth).then(() => {\n      navigate(\"/\");\n    }).catch(err => {\n      alert(err.message);\n    });\n  }; // add\n\n\n  const writeToDatabase = () => {\n    const uidd = uid();\n    set(ref(db, `/${auth.currentUser.uid}/${uidd}`), {\n      todo: todo,\n      description: description,\n      category: category,\n      date: date,\n      uidd: uidd\n    });\n    setTodo(\"\");\n    setDescription(\"\");\n    setCategory(\"\");\n    setDate(\"\");\n  };\n\n  const [dbvals, setDbVals] = useState(\"\");\n\n  const getTodoByUidd = async uidd => {\n    console.log(\"GetTODOByUidd\");\n    const snapshot = await get(child(ref(db), `${auth.currentUser.uid}/${uidd}`));\n\n    if (snapshot.exists()) {\n      console.log(\"Success\");\n      setDbVals(snapshot.val());\n      return snapshot.val();\n    } else {\n      console.log(\"Hello\");\n      return null;\n    }\n  };\n\n  const handleUpdate = async uid => {\n    setIsEdit(true);\n    const dbVals = await getTodoByUidd(uid);\n\n    if (dbVals && dbVals.uidd && dbvals.description && dbvals.category && dbvals.date) {\n      console.log(dbvals);\n      setTodo(dbVals.todo);\n      setDescription(dbVals.description);\n      setCategory(dbVals.category);\n      setDate(dbVals.date);\n      setTempUidd(dbvals.uidd);\n    }\n  };\n\n  const handleEditConfirm = () => {\n    update(ref(db, `/${auth.currentUser.uid}/${tempUidd}`), {\n      todo: todo,\n      description: description,\n      category: category,\n      date: date,\n      tempUidd: tempUidd\n    });\n    setTodo(\"\");\n    setDescription(\"\");\n    setCategory(\"\");\n    setDate(\"\");\n    setIsEdit(false);\n  }; // delete\n\n\n  const handleDelete = uid => {\n    console.log(uid);\n    remove(ref(db, `/${auth.currentUser.uid}/${uid}`));\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header\",\n      children: /*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"homepage\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"add-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"add-edit-input\",\n          type: \"text\",\n          placeholder: \"Category...\",\n          value: category,\n          onChange: e => setCategory(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"add-edit-input\",\n          type: \"text\",\n          placeholder: \"Add todo Name...\",\n          value: todo,\n          onChange: e => setTodo(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"add-edit-input\",\n          type: \"text\",\n          placeholder: \"Description...\",\n          value: description,\n          onChange: e => setDescription(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"add-edit-input\",\n          type: \"date\",\n          placeholder: \"Date...\",\n          value: date,\n          onChange: e => setDate(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 11\n        }, this), isEdit ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(CheckIcon, {\n            onClick: handleEditConfirm,\n            className: \"add-confirm-icon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"confirm-icon\",\n          children: /*#__PURE__*/_jsxDEV(AddIcon, {\n            onClick: writeToDatabase,\n            className: \"add-confirm-icon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this), todos.map(todo => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"todo\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: todo.todo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(EditIcon, {\n          fontSize: \"large\",\n          onClick: () => handleUpdate(todo.uidd),\n          className: \"edit-button\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(DeleteIcon, {\n          fontSize: \"large\",\n          onClick: () => handleDelete(todo.uidd),\n          className: \"delete-button\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(LogoutIcon, {\n        onClick: handleSignOut,\n        className: \"logout-icon\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bottom-container\",\n        children: /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Homepage, \"QTPl/zz6TdQLtZgFYTlHSfS411A=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Homepage;\n\nvar _c;\n\n$RefreshReg$(_c, \"Homepage\");","map":{"version":3,"sources":["/Users/dineshvujuru/Desktop/DineshFiles/Masters/Spring2023/Webapps/Milestone2/Netlify/TodoApp/src/components/Homepage.js"],"names":["React","useEffect","useState","signOut","onAuthStateChanged","auth","db","useNavigate","uid","set","ref","onValue","remove","update","child","get","Header","Footer","AddIcon","EditIcon","DeleteIcon","LogoutIcon","CheckIcon","Homepage","category","setCategory","description","setDescription","todo","setTodo","date","setDate","todos","setTodos","isEdit","setIsEdit","tempUidd","setTempUidd","navigate","user","currentUser","snapshot","data","val","Object","values","map","oldArray","handleSignOut","then","catch","err","alert","message","writeToDatabase","uidd","dbvals","setDbVals","getTodoByUidd","console","log","exists","handleUpdate","dbVals","handleEditConfirm","handleDelete","e","target","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { signOut, onAuthStateChanged } from \"firebase/auth\";\nimport { auth, db } from \"../firebase.js\";\nimport { useNavigate } from \"react-router-dom\";\nimport { uid } from \"uid\";\nimport { set, ref, onValue, remove, update } from \"firebase/database\";\nimport { child, get } from \"firebase/database\";\n\n\nimport Header from \"./Header.js\";\nimport Footer from \"./Footer.js\";\n\nimport \"./homepage.css\";\nimport AddIcon from \"@mui/icons-material/Add\";\nimport EditIcon from \"@mui/icons-material/Edit\";\nimport DeleteIcon from \"@mui/icons-material/Delete\";\nimport LogoutIcon from '@mui/icons-material/Logout';\nimport CheckIcon from '@mui/icons-material/Check';\n\nexport default function Homepage() {\n  const [category, setCategory] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [todo, setTodo] = useState(\"\");\n  const [date, setDate] = useState(\"\");\n  const [todos, setTodos] = useState([]);\n  const [isEdit, setIsEdit] = useState(false);\n  const [tempUidd, setTempUidd] = useState(\"\");\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    auth.onAuthStateChanged((user) => {\n      if (user) {\n        // read\n        onValue(ref(db, `/${auth.currentUser.uid}`), (snapshot) => {\n          setTodos([]);\n          const data = snapshot.val();\n          if (data !== null) {\n            Object.values(data).map((todo) => {\n              setTodos((oldArray) => [...oldArray, todo]);\n            });\n          }\n        });\n      } else if (!user) {\n        navigate(\"/\");\n      }\n    });\n  }, []);\n\n  const handleSignOut = () => {\n    signOut(auth)\n      .then(() => {\n        navigate(\"/\");\n      })\n      .catch((err) => {\n        alert(err.message);\n      });\n  };\n\n  // add\n  const writeToDatabase = () => {\n    const uidd = uid();\n    set(ref(db, `/${auth.currentUser.uid}/${uidd}`), {\n      todo: todo,\n      description: description,\n      category: category,\n      date: date,\n      uidd: uidd\n    });\n\n    setTodo(\"\");\n    setDescription(\"\");\n    setCategory(\"\");\n    setDate(\"\");\n  };\n\n\n  const [dbvals, setDbVals] = useState(\"\"); \n\nconst getTodoByUidd = async (uidd) => {\n  console.log(\"GetTODOByUidd\");\n  const snapshot = await get(child(ref(db), `${auth.currentUser.uid}/${uidd}`));\n  if (snapshot.exists()) {\n    console.log(\"Success\")\n    setDbVals(snapshot.val());\n    return snapshot.val();\n  } else {\n    console.log(\"Hello\");\n    return null;\n  }\n};\n\nconst handleUpdate = async (uid) => {\n  setIsEdit(true);\n  const dbVals = await getTodoByUidd(uid);\n  \n  if(dbVals && dbVals.uidd && dbvals.description && dbvals.category && dbvals.date) {\n    console.log(dbvals);\n    setTodo(dbVals.todo);\n    setDescription(dbVals.description);\n    setCategory(dbVals.category);\n    setDate(dbVals.date);\n    setTempUidd(dbvals.uidd);\n  }\n};\n\n  const handleEditConfirm = () => {\n\n    update(ref(db, `/${auth.currentUser.uid}/${tempUidd}`), {\n      todo: todo,\n      description: description,\n      category: category,\n      date: date,\n      tempUidd: tempUidd\n    });\n\n    setTodo(\"\");\n    setDescription(\"\")\n    setCategory(\"\")\n    setDate(\"\")\n    setIsEdit(false);\n  };\n\n  // delete\n  const handleDelete = (uid) => {\n    console.log(uid);\n    remove(ref(db, `/${auth.currentUser.uid}/${uid}`));\n  };\n\n  return (\n    <><div className=\"header\">\n      <Header />\n    </div><div className=\"homepage\">\n\n\n        <div className=\"add-container\">\n          <input\n            className=\"add-edit-input\"\n            type=\"text\"\n            placeholder=\"Category...\"\n            value={category}\n            onChange={(e) => setCategory(e.target.value)} />\n\n          <input\n            className=\"add-edit-input\"\n            type=\"text\"\n            placeholder=\"Add todo Name...\"\n            value={todo}\n            onChange={(e) => setTodo(e.target.value)} />\n\n          <input\n            className=\"add-edit-input\"\n            type=\"text\"\n            placeholder=\"Description...\"\n            value={description}\n            onChange={(e) => setDescription(e.target.value)} />\n          <input\n            className=\"add-edit-input\"\n            type=\"date\"\n            placeholder=\"Date...\"\n            value={date}\n            onChange={(e) => setDate(e.target.value)} />\n          {isEdit ? (\n            <div>\n              <CheckIcon onClick={handleEditConfirm} className=\"add-confirm-icon\" />\n            </div>\n          ) : (\n            <div className=\"confirm-icon\">\n              <AddIcon onClick={writeToDatabase} className=\"add-confirm-icon\" />\n            </div>\n          )}\n        </div>\n\n        {todos.map((todo) => (\n          <div className=\"todo\">\n\n            <h1>{todo.todo}</h1>\n            {/* <h1>{description.description}</h1> */}\n\n            <EditIcon\n              fontSize=\"large\"\n              onClick={() => handleUpdate(todo.uidd)}\n              className=\"edit-button\" />\n            <DeleteIcon\n              fontSize=\"large\"\n              onClick={() => handleDelete(todo.uidd)}\n              className=\"delete-button\" />\n          </div>\n        ))}\n\n\n        <LogoutIcon onClick={handleSignOut} className=\"logout-icon\" />\n        <div className=\"bottom-container\">\n        <Footer />\n        </div>\n      </div></>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}